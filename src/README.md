# Программная инженерия, семестр 2


### О проекте
В качестве итогового задания по курсу Программная инженерия выбрана реализация API-приложения.
Приложение использует библиотеку `FastAPI` для реализации API интерфеса и билиотеку `uvicorn` в качестве легкого и быстрого веб-сервера.
В проекте используется модель МО типа вопрос-ответ (question-answering) [timpal0l/mdeberta-v3-base-squad2](https://huggingface.co/timpal0l/mdeberta-v3-base-squad2)
Модель позвоялет найти информацию (получить ответ) внутри переданного в нее контекста.
Фактическое применение подобной модели возможно, когда пользователю необходимо получить быстрый ответ по тексту без использования классического контекстного поиска.
Реализовано:
- метод GET на [главную страницу](http://158.160.48.28:8000), который возвращает просто приветственный текст, 
- метод GET на [страницу с контекстом](http://158.160.48.28:8000/cont/), который возвращает просто текст, 
- метод POST на [страницу с предсканием модели](http://158.160.48.28:8000/predict/), которая возвращает json объект с ответом на вопрос, который был передан в методе
- метод POST на [страницу с расчетом квадрата числа](http://158.160.48.28:8000/sqnum/), которая возвращает квадрат переданного в методе числа (просто для теста) 
Реализация работы модели через запросы API [в файле qa_fapi.py](https://github.com/nasheshin01/URFU_ML_PI/blob/master/perevispa/qa_fapi.py)

### Развертывание приложения 
Приложение разверунто на виртуальном сервере в Yandex.Cloud по ссылке `http://158.160.48.28:8000/`
С API-документацией можно ознакомиться по ссылке [http://158.160.48.28:8000/docs](http://158.160.48.28:8000/docs)
В НАСТОЯЩИЙ МОМЕНТ (СЕМЕСТР 2) СЕРВЕР В ОБЛАКЕ НЕ РАБОТАЕТ!

### Использование приложения
Модель возвращает ответ на вопрос пользователя на основании переданного контекста. Вопрос отправляется методом POST на адрес `http://158.160.48.28:8000/predict/`. Тело запроса: json объект с двумя переменными. В переменной `text` собственно отправляется вопрос к модели. 
_____
**Пример curl запроса:**
```bash
curl -X 'POST' \
  'http://158.160.48.28:8000/predict/' \
  -H 'accept: application/json' \
  -H 'Content-Type: application/json' \
  -d '{
  "text": "Кто преподаватель предмета?",
  "num": 0
}'
```
______
**Пример 200 ответа (body response):**
```json
{
  "score": 0.9657419323921204,
  "start": 21,
  "end": 29,
  "answer": "Александр Токарев"
}
```
